!function(e){e.entwine("ss",function(e){e(".gridfield-help-button-dialog").entwine({loadDialog:function(e){var i=this.addClass("loading").children(".ui-dialog-content").empty();e.done(function(e){i.html(e).parent().removeClass("loading")})}}),e(".ss-gridfield .gridfield-help-button").entwine({onclick:function(){var i=e("<div></div>").appendTo("body").dialog({modal:!1,resizable:!0,width:600,height:600,close:function(){e(this).dialog("destroy").remove()}});return i.parent().addClass("gridfield-help-button-dialog").loadDialog(e.get(this.prop("href"))),i.data("grid",this.closest(".ss-gridfield")),!1}}),e(".ss-gridfield-treeView--toggle").entwine({onclick:function(){return!1}}),e(".ss-gridfield-hasOneSelector-reset_button[data-relation]").entwine({onclick:function(){return this.parents(".ss-gridfield:first").find('td[data-relation="'+this.data("relation")+'"] ').each(function(){e(this).find("input").prop("checked",!1)}),!1}}),e(".ss-gridfield-hasOneSelector-toggle[data-relation]").entwine({onclick:function(){var i=this.prop("checked");this.parents(".ss-gridfield:first").find('td[data-relation="'+this.data("relation")+'"] ').each(function(){e(this).find("input").prop("checked",!i)})}}),e(".ss-gridfield.ss-gridfield-add-inline-extended--table").entwine({reload:function(e,i){var d=this,n=d.find("tbody:first").find(".ss-gridfield-inline-new-extended--row").detach();this._super(e,function(){n.length&&(n.appendTo(d.find("tbody:first")),d.find("tbody:first").children(".ss-gridfield-no-items:first").hide()),i&&i.apply(d,arguments)})},onaddnewinlinextended:function(i,d){if(i.target==this[0]){var n=this.find("tbody:first"),t=this.data("add-inline-num")||1;if(d&&d.data("ajax")){var s=d.hasClass("ss-ui-action-constructive"),a=d.siblings(".ss-gridfield-inline-new-extended--class-selector:first"),l={_datanum:t};if(a.length){if(!a.val())return void alert("Please select a type to create");l[this.attr("id")+"_modelClass"]=a.val()}d.addClass("ss-gridfield-add-inline-extended--loading disabled ss-ui-button-loading"),d.find(".ui-icon").addClass("ss-ui-loading-icon"),s&&d.removeClass("ss-ui-action-constructive"),e.ajax({url:d[0].href,dataType:"html",data:l,success:function(i){d.removeClass("ss-gridfield-add-inline-extended--loading disabled ss-ui-button-loading"),d.find(".ui-icon").removeClass("ss-ui-loading-icon");var t=e(i);t.find("ss-gridfield-editable-row--toggle"),n.append(t),n.children(".ss-gridfield-no-items:first").hide(),t.find("input:first").focus(),s&&d.addClass("ss-ui-action-constructive")},error:function(e){alert(ss.i18n._t("GRIDFIELD.ERRORINTRANSACTION")),d.removeClass("ss-gridfield-add-inline-extended--loading disabled")}})}else{var r=window.tmpl,o=this.find(".ss-gridfield-add-inline-extended--template:last");r.cache[this[0].id+"-ss-gridfield-add-inline-extended--template"]=r(o.html());var f=e(r(this[0].id+"-ss-gridfield-add-inline-extended--template",{num:t}));n.append(f),n.children(".ss-gridfield-no-items:first").hide(),f.find("input:first").focus()}this.data("add-inline-num",t+1)}}}),e(".ss-gridfield-add-new-inline-extended--button").entwine({onclick:function(){return this.getGridField().trigger("addnewinlinextended",[this]),!1}}),e(".ss-gridfield-inline-new-extended--row-delete").entwine({onclick:function(){return confirm(ss.i18n._t("GridFieldExtensions.CONFIRMDEL","Are you sure you want to delete this?"))&&this.parents("tbody:first").find("tr[data-inline-new-extended-row="+this.parents("tr[data-inline-new-extended-row]:first").data("inlineNewExtendedRow")+"]").remove(),!1}}),e(".ss-gridfield-add-inline-extended--toggle").entwine({onclick:function(){var e=this.parents("tr:first");return this.toggleClass("ss-gridfield-add-inline-extended--toggle_open"),e.parent().find(".ss-gridfield-inline-new-extended--row--has-columns[data-inline-new-extended-row="+e.data("inlineNewExtendedRow")+"]").toggleClass("ss-gridfield-inline-new-extended--row--has-columns_open"),!1}}),e(".ss-gridfield-editable-row--toggle").entwine({onclick:function(){var i=this,d=i.parents("td:first"),n=d.data("link"),t=i.parents("tr:first");if(n&&!i.hasClass("ss-gridfield-editable-row--toggle_loaded"))t.addClass("ss-gridfield-editable-row--loading"),e.ajax({url:n,dataType:"html",success:function(d){var n=e(d);i.addClass("ss-gridfield-editable-row--toggle_loaded ss-gridfield-editable-row--toggle_open"),t.removeClass("ss-gridfield-editable-row--loading"),t.after(n),n.find("input:first").focus()},error:function(e){alert(ss.i18n._t("GRIDFIELD.ERRORINTRANSACTION")),t.removeClass("ss-gridfield-editable-row--loading")}});else if(n){var s=t.next();s.hasClass("ss-gridfield-editable-row--row")&&s.data("id")==t.data("id")&&s.data("class")==t.data("class")&&(i.toggleClass("ss-gridfield-editable-row--toggle_open"),i.hasClass("ss-gridfield-editable-row--toggle_open")?s.removeClass("ss-gridfield-editable-row--row_hide").find("input:first").focus():s.addClass("ss-gridfield-editable-row--row_hide"))}return!1}});var i;e(".ss-gridfield-range-slider--field.rangeslider.has-rangeslider").entwine({onchange:function(e){if(e.timeStamp!=i){i=e.timeStamp;var d=this.parents(".ss-gridfield-range-slider:first"),n=d.find(".ss-gridfield-range-slider--button");n.length&&n.click()}}})})}(jQuery);